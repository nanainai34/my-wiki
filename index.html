<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>世界防衛国家連邦架空国家 Wiki</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="header-content">
            <h1>世界防衛国家連邦政府 Wiki</h1>
            <p>歴史・政府・文化・ギャラリーなど</p>
        </div>
    </header>
    <nav>
        <ul>
            <li><a href="#about">国家概要</a></li>
            <li><a href="#history">歴史</a></li>
            <li><a href="#government">政府</a></li>
            <li><a href="#culture">文化</a></li>
            <li><a href="#gallery">ギャラリー</a></li>
            <li><a href="#comments">コメント</a></li>
        </ul>
    </nav>
    <main>
        <section id="about">
            <h2>国家概要</h2>
            <p>ここに国家の基本的な情報と特徴を記述します。</p>
        </section>
        <section id="history" class="content-section">
            <h2>歴史</h2>
            <div id="history-panel" class="panel">
                <!-- コメント表示エリア -->
            </div>
            <form id="history-form">
                <h3>歴史にコメントする</h3>
                <label for="history-name">名前:</label><br>
                <input type="text" id="history-name" name="history-name" required><br>
                <label for="history-comment">コメント:</label><br>
                <textarea id="history-comment" name="history-comment" rows="4" cols="50" required></textarea><br>
                <button type="submit">コメントする</button>
            </form>
        </section>
        <!-- 他のセクションも同様にフォームと表示エリアを追加 -->
    </main>
    <footer>
        <p>&copy; 2024 年世界防衛国家連邦架空国家。無断転載を禁じます。</p>
    </footer>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // ページ読み込み時に保存されたコメントをロードする
            loadComments();

            // コメントをローカルストレージに保存する関数
            function saveComment(sectionId, name, comment) {
                let comments = JSON.parse(localStorage.getItem(sectionId)) || [];
                comments.push({ name: name, comment: comment });
                localStorage.setItem(sectionId, JSON.stringify(comments));
            }

            // ローカルストレージからコメントをロードして表示する関数
            function loadComments() {
                ['history', 'government', 'culture'].forEach(sectionId => {
                    let comments = JSON.parse(localStorage.getItem(sectionId)) || [];
                    let panel = document.getElementById(`${sectionId}-panel`);
                    panel.innerHTML = ''; // コメントをクリアしてから再描画
                    comments.forEach(entry => {
                        let commentElement = document.createElement("div");
                        commentElement.className = "comment";
                        commentElement.innerHTML = `<strong>${entry.name}</strong><p>${entry.comment}</p>`;
                        panel.appendChild(commentElement);
                    });
                });
            }

            // コメントフォームの送信時の処理
            document.getElementById("history-form").addEventListener("submit", function(event) {
                event.preventDefault();
                let name = document.getElementById("history-name").value;
                let comment = document.getElementById("history-comment").value;
                saveComment("history", name, comment);
                loadComments(); // コメントを再読み込みして表示する
                document.getElementById("history-name").value = "";
                document.getElementById("history-comment").value = "";
            });

            </form>
        </section>
    </main>
    <footer>
        <p>&copy; 2024 年世界防衛国家連邦架空国家。無断転載を禁じます。</p>
    </footer>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // Function to handle form submissions
            function handleFormSubmit(event, panelId, nameId, commentId) {
                event.preventDefault();
                const panel = document.getElementById(panelId);
                const name = document.getElementById(nameId).value;
                const comment = document.getElementById(commentId).value;
                const commentElement = document.createElement("div");
                commentElement.className = "comment";
                commentElement.innerHTML = `<strong>${name}</strong><p>${comment}</p>`;
                panel.appendChild(commentElement);
                // Clear the form inputs
                document.getElementById(nameId).value = "";
                document.getElementById(commentId).value = "";
            }

            // Attach form submit event listeners
            document.getElementById("history-form").addEventListener("submit", function(event) {
                handleFormSubmit(event, "history-panel", "history-name", "history-comment");
            });

            document.getElementById("government-form").addEventListener("submit", function(event) {
                handleFormSubmit(event, "government-panel", "government-name", "government-comment");
            });

            document.getElementById("culture-form").addEventListener("submit", function(event) {
                handleFormSubmit(event, "culture-panel", "culture-name", "culture-comment");
            });

            document.getElementById("comment-form").addEventListener("submit", function(event) {
                handleFormSubmit(event, "comment-list", "comment-name", "comment-content");
            });
        });
    </script>
</body>
</html>
