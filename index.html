<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>世界防衛国家連邦政府 Wiki</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="header-content">
            <h1>世界防衛国家連邦政府 Wiki</h1>
            <p>歴史・政府・文化・ギャラリーなど</p>
        </div>
    </header>
    <nav>
        <ul>
            <li><a href="#about">国家概要</a></li>
            <li><a href="#history">歴史</a></li>
            <li><a href="#government">政府</a></li>
            <li><a href="#culture">文化</a></li>
            <li><a href="#gallery">ギャラリー</a></li>
            <li><a href="#comments">コメント</a></li>
        </ul>
    </nav>
    <main>
        <section id="about">
            <h2>国家概要</h2>
            <p>ここに国家の基本的な情報と特徴を記述します。</p>
        </section>
        <section id="history" class="content-section">
            <h2>歴史</h2>
            <div id="history-panel" class="panel">
                <!-- コメント表示エリア -->
            </div>
            <form id="history-form">
                <h3>歴史にコメントする</h3>
                <label for="history-name">名前:</label><br>
                <input type="text" id="history-name" name="history-name" required><br>
                <label for="history-comment">コメント:</label><br>
                <textarea id="history-comment" name="history-comment" rows="4" cols="50" required></textarea><br>
                <button type="submit">コメントする</button>
            </form>
        </section>
        <section id="government" class="content-section">
            <h2>政府</h2>
            <div id="government-panel" class="panel">
                <!-- コメント表示エリア -->
            </div>
            <form id="government-form">
                <h3>政府にコメントする</h3>
                <label for="government-name">名前:</label><br>
                <input type="text" id="government-name" name="government-name" required><br>
                <label for="government-comment">コメント:</label><br>
                <textarea id="government-comment" name="government-comment" rows="4" cols="50" required></textarea><br>
                <button type="submit">コメントする</button>
            </form>
        </section>
        <section id="culture" class="content-section">
            <h2>文化</h2>
            <div id="culture-panel" class="panel">
                <!-- コメント表示エリア -->
            </div>
            <form id="culture-form">
                <h3>文化にコメントする</h3>
                <label for="culture-name">名前:</label><br>
                <input type="text" id="culture-name" name="culture-name" required><br>
                <label for="culture-comment">コメント:</label><br>
                <textarea id="culture-comment" name="culture-comment" rows="4" cols="50" required></textarea><br>
                <button type="submit">コメントする</button>
            </form>
        </section>
        <section id="gallery" class="content-section">
            <h2>ギャラリー</h2>
            <p>国家の写真やイラストなどを掲載します。</p>
            <form id="photo-form">
                <h3>写真をアップロードする</h3>
                <label for="photo-name">名前:</label><br>
                <input type="text" id="photo-name" name="photo-name" required><br>
                <label for="photo-file">ファイルの選択:</label><br>
                <input type="file" id="photo-file" name="photo-file" accept="image/*" required><br>
                <button type="submit">アップロードする</button>
            </form>
            <div id="photo-gallery"></div>
        </section>
        <section id="comments" class="content-section">
            <h2>コメント一覧</h2>
            <ul id="comment-list"></ul>
            <form id="comment-form">
                <h3>コメントを投稿する</h3>
                <label for="comment-name">名前:</label><br>
                <input type="text" id="comment-name" name="comment-name" required><br>
                <label for="comment-content">コメント:</label><br>
                <textarea id="comment-content" name="comment-content" rows="4" cols="50" required></textarea><br>
                <button type="submit">投稿する</button>
            </form>
        </section>
    </main>
    <footer>
        <p>&copy; 2024 年世界防衛国家連邦政府 Wiki。無断転載を禁じます。</p>
    </footer>
    <!-- Firebase JavaScript SDK の読み込み -->
    <script src="https://www.gstatic.com/firebasejs/9.1.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.1/firebase-analytics.js"></script>
    <script>
        // Firebase の設定情報
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_AUTH_DOMAIN",
            databaseURL: "YOUR_DATABASE_URL",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_STORAGE_BUCKET",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID",
            measurementId: "YOUR_MEASUREMENT_ID"
        };

        // Firebase を初期化
        firebase.initializeApp(firebaseConfig);
        firebase.analytics();

        // Realtime Database の参照を取得
        const db = firebase.database();
        const commentsRef = db.ref('comments');

        // コメントを読み込んで表示する関数
        function loadComments() {
            commentsRef.once('value', (snapshot) => {
                const comments = snapshot.val();
                const commentList = document.getElementById('comment-list');
                commentList.innerHTML = ''; // コメントリストをクリア
                for (let key in comments) {
                    const comment = comments[key];
                    const li = document.createElement('li');
                    li.innerHTML = `<strong>${comment.name}:</strong> ${comment.content}`;
                    commentList.appendChild(li);
                }
            });
        }

        // コメント投稿フォームの処理
        const commentForm = document.getElementById('comment-form');
        commentForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const name = document.getElementById('comment-name').value;
            const content = document.getElementById('comment-content').value;
            commentsRef.push({ name, content })
                .then(() => {
                    // フォームをクリア
                    document.getElementById('comment-name').value = '';
                    document.getElementById('comment-content').value = '';
                    // コメント再読み込み
                    loadComments();
                })
                .catch((error) => {
                    console.error('Error adding comment: ', error);
                });
        });

        // 初期化時にコメントを読み込んで表示
        document.addEventListener("DOMContentLoaded", function() {
            loadComments();
        });
    </script>
</body>
</html>

